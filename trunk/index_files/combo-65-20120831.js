(function($){var uid="ar"+ +new Date,defaults=autoResize.defaults={onResize:function(){},onBeforeResize:function(){return 123;},onAfterResize:function(){return 555;},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};autoResize.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingTop","paddingLeft","paddingBottom","paddingRight","width"];autoResize.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden"};autoResize.resizableFilterSelector=["textarea:not(textarea."+uid+")","input:not(input[type])","input[type=text]","input[type=password]","input[type=email]","input[type=url]"].join(",");autoResize.AutoResizer=AutoResizer;$.fn.autoResize=autoResize;function autoResize(config){this.filter(autoResize.resizableFilterSelector).each(function(){new AutoResizer($(this),config);});return this;}function AutoResizer(el,config){if(el.data("AutoResizer")){el.data("AutoResizer").destroy();}config=this.config=$.extend(true,{},autoResize.defaults,config);this.el=el;this.nodeName=el[0].nodeName.toLowerCase();this.originalHeight=el.height();this.previousScrollTop=null;this.value=el.val();if(config.maxWidth==="original"){config.maxWidth=el.width();}if(config.minWidth==="original"){config.minWidth=el.width();}if(config.maxHeight==="original"){config.maxHeight=el.height();}if(config.minHeight==="original"){config.minHeight=el.height();}if(this.nodeName==="textarea"){el.css({resize:"none",overflowY:"hidden"});}el.data("AutoResizer",this);config.animate.complete=(function(f){return function(){config.onAfterResize.call(el);return f.apply(this,arguments);};}(config.animate.complete));this.bind();}AutoResizer.prototype={bind:function(){var check=$.proxy(function(){this.check();return true;},this);this.unbind();this.el.bind("keyup.autoResize",check).bind("change.autoResize",check).bind("paste.autoResize",function(){setTimeout(function(){check();},0);});if(!this.el.is(":hidden")){this.check(null,true);}},unbind:function(){this.el.unbind(".autoResize");},createClone:function(){var el=this.el,clone=this.nodeName==="textarea"?el.clone():$("<span/>");this.clone=clone;$.each(autoResize.cloneCSSProperties,function(i,p){clone[0].style[p]=el.css(p);});clone.removeAttr("name").removeAttr("id").addClass(uid).attr("tabIndex",-1).css(autoResize.cloneCSSValues);if(this.nodeName==="textarea"){clone.height("auto");}else{clone.width("auto").css({whiteSpace:"nowrap"});}},check:function(e,immediate){if(!this.clone){this.createClone();this.injectClone();}var config=this.config,clone=this.clone,el=this.el,value=el.val();if(value===this.prevValue){return true;}this.prevValue=value;if(this.nodeName==="input"){clone.text(value);var cloneWidth=clone.width(),newWidth=(cloneWidth+config.extraSpace)>=config.minWidth?cloneWidth+config.extraSpace:config.minWidth,currentWidth=el.width();newWidth=Math.min(newWidth,config.maxWidth);if((newWidth<currentWidth&&newWidth>=config.minWidth)||(newWidth>=config.minWidth&&newWidth<=config.maxWidth)){config.onBeforeResize.call(el);config.onResize.call(el);el.scrollLeft(0);if(config.animate&&!immediate){el.stop(1,1).animate({width:newWidth},config.animate);}else{el.width(newWidth);config.onAfterResize.call(el);}}return;}clone.width(el.width()).height(0).val(value).scrollTop(10000);var scrollTop=clone[0].scrollTop;if(this.previousScrollTop===scrollTop){return;}this.previousScrollTop=scrollTop;if(scrollTop+config.extraSpace>=config.maxHeight){el.css("overflowY","");scrollTop=config.maxHeight;immediate=true;}else{if(scrollTop<=config.minHeight){scrollTop=config.minHeight;}else{el.css("overflowY","hidden");scrollTop+=config.extraSpace;}}config.onBeforeResize.call(el);config.onResize.call(el);if(config.animate&&!immediate){el.stop(1,1).animate({height:scrollTop},config.animate);}else{el.height(scrollTop);config.onAfterResize.call(el);}},destroy:function(){this.unbind();this.el.removeData("AutoResizer");this.clone.remove();delete this.el;delete this.clone;},injectClone:function(){(autoResize.cloneContainer||(autoResize.cloneContainer=$("<arclones/>").appendTo("body"))).append(this.clone);}};})(jQuery);var Connect={};Connect.user_id=0;Connect.csrf_token_value=null;Connect.csrf_token_name=null;Connect.env="production";$(document).ready(function(){Connect.init();});Connect.init=function(){Connect.csrf_token_name=$("meta[name=csrf-name]").attr("content");Connect.csrf_token_value=$("meta[name=csrf-value]").attr("content");Connect.user_id=parseInt($("meta[name=current-uid]").attr("content"));Connect.env=$("meta[name=simple-env]").attr("content");$(".notice-bar a.close").click(function(e){e.preventDefault();return Connect.hideNoticeBar();});$(".alert-message a.close").bind("click",function(){$(this).parents(".alert-message").slideUp();});if(jQuery().datepicker){$("input.datepicker").datepicker();}if(jQuery().timePicker){$("input.timePicker").timePicker({show24Hours:false,step:5});}jQuery.timeago.settings.allowFuture=true;jQuery("time.timeago").timeago();Connect.applyLibs();$("form.quick-post textarea").focus(function(){$("form.quick-post span.quick-post-buttons").addClass("show");});$("form.quick-post textarea").keyup(function(){if($(this).val()){$("form.quick-post span.quick-post-buttons .btn").removeAttr("disabled");}else{$("form.quick-post span.quick-post-buttons .btn").attr("disabled","disabled");}});$("form.quick-post textarea, textarea.resize").autoResize({maxHeight:200,});$("#feedback-link a, .feedback").click(function(e){e.preventDefault();$.facebox({ajax:"/facebox/feedback"},"feedback-facebox");});$("a[rel*=facebox]").facebox();if(Connect.env=="development"||Connect.env=="development-local"){Connect.setupDebug();}$(document).bind("afterReveal.facebox",function(){var windowHeight=$(window).height();var faceboxHeight=$("#facebox").height();if(faceboxHeight<windowHeight){$("#facebox").css("top",(Math.floor((windowHeight-faceboxHeight)/2)+$(window).scrollTop()));}});$("input.focus-on-load").focus();if(Connect.user_id<1){var ShowingHeaderLogin=false;$("#header li.login-dropdown a.dropdown-toggle").click(function(e){if(ShowingHeaderLogin){ShowingHeaderLogin=false;return;}else{ShowingHeaderLogin=true;$("#login-dropdown-input").focus();return;}});}Connect.setupWelcome();};Connect.applyLibs=function(){Connect.tipsify();Connect.setupSpiffyLink();Connect.LikeButtons();Connect.FollowButtons();Connect.messageLinks();};Connect.setupDebug=function(){$("span#ci_profiler").click(function(){$("#codeigniter_profiler").toggle();});};Connect.FollowButtons=function(){$(".follow-btn").each(function(){if(Connect.user_id==0){return $(this).remove();}if($(this).data("is-setup")){return;}$(this).addClass("btn");if($(this).data("is-following")){$(this).addClass("btn-primary");$(this).html("<i></i> Following");$(this).children("i").addClass("icon-minus-sign icon-white");}else{$(this).html("<i></i> Follow");$(this).addClass("btn-inverse");$(this).children("i").addClass("icon-plus-sign icon-white");}$(this).data("is-setup",true);});$(".follow-btn").unbind("click");$(".follow-btn").bind("click",function(e){e.preventDefault();Connect.FollowButtonClick($(this));});};Connect.FollowButtonClick=function(o){o.attr("disabled","disabled");$.ajax({url:"/users/follow",data:{form_key:Connect.csrf_token_value,"to":o.data("internal-id"),"isCompany":o.data("is-company"),},cache:false,dataType:"json",type:"POST",success:function(data){o.removeClass("btn-primary btn-inverse");o.data("is-following",data.following);if(data.following){o.addClass("btn-primary");o.html("<i></i> Following");o.children("i").addClass("icon-minus-sign icon-white");}else{o.html("<i></i> Follow");o.addClass("btn-inverse");o.children("i").addClass("icon-plus-sign icon-white");}},error:function(){Connect.ajaxError();},complete:function(){o.removeAttr("disabled");},});};Connect.hideNoticeBar=function(){$(".notice-bar").slideUp();return false;};Connect.tipsify=function(){$('a.[title][rel!="popover"], .short-url input, form abbr[title], .doTipsy, .tipsy').tooltip();$("[rel=popover]").popover({offset:10});};Connect.setupSpiffyLink=function(){$("a.spiffy").unbind("click");$("a.spiffy").click(function(theObj){theObj.preventDefault();Connect.SpiffyLink($(this));});$("form.spiffy_form input.submit").unbind("click");$("form.spiffy-form").submit(function(e){e.preventDefault();Connect.SpiffyForm($(this));});};Connect.messageLinks=function(){$("a.message-link").unbind("click");$("a.message-link").click(function(e){e.preventDefault();UID=$(this).data("user-id");jQuery.facebox({ajax:"/ajax/send_message/"+UID},"message-facebox");});};Connect.SpiffyLink=function(obj){$("#loading").show();$.ajax({url:obj.attr("href"),data:{form_key:Connect.csrf_token_value,"user_id":Connect.user_id},cache:false,dataType:"script",type:"POST",success:function(data){if(obj.attr("callback")){eval(obj.attr("callback"));}},error:function(){Connect.ajaxError();},complete:function(){$("#loading").hide();},});};Connect.SpiffyForm=function(obj){$("#loading").show();$.ajax({url:obj.attr("action"),data:{form_key:Connect.csrf_token_value,"form_data":obj.serialize(),},cache:false,dataType:"script",type:"POST",success:function(data){if(obj.attr("callback")){eval(obj.attr("callback"));}},error:function(){Connect.ajaxError();},complete:function(){$("#loading").hide();},});};Connect.isCheckingUsername=false;Connect.userNameAvil=false;Connect.checkUsername=function(theSlug,successFunc){if(Connect.isCheckingUsername){return false;}Connect.isCheckingUsername=true;$("#loading").show();$.ajax({url:"/users/check_exists",data:{form_key:Connect.csrf_token_value,"slug":theSlug,},cache:true,dataType:"json",type:"POST",success:function(data){successFunc(data.avail,data.username);},error:function(){Connect.ajaxError();},complete:function(){$("#loading").hide();Connect.isCheckingUsername=false;},});};Connect.successMessage=function(msg){$("#header").before('<div id="" class="notice-bar alert-message success fixed-top" style="position:fixed; display:none;"><span><strong>Woot!</strong> '+msg+"</span></div>");$("div.fixed-top.notice-bar").slideDown("fast");$(".notice-bar").delay(5000).slideUp();return true;};Connect.failureMessage=function(msg){$("#header").before('<div id="" class="notice-bar alert-message error fixed-top" style="position:fixed; display:none;"><span><strong>Oops.</strong> '+msg+"</span></div>");$("div.fixed-top.notice-bar").slideDown("fast");$(".notice-bar").delay(5000).slideUp();return true;};Connect.ajaxError=function(){Connect.failureMessage("Sorry, an error has occured.");};Connect.setupWebSort=function(){$("ul.sortable span.up a").click(function(e){e.preventDefault();parent=$(this).parents("li");prev=parent.prev("li");console.log(prev);if(!prev){}else{prev.prependTo(parent);}});$("ul.sortable span.down a").click(function(e){e.preventDefault();});};Connect.setupFeedback=function(){$("#topic-selector a").unbind("click");$("#topic-selector a").click(function(e){e.preventDefault();$("#topic-selector li.selected").removeClass("selected");$(this).parents("li").addClass("selected");if($(this).data("type")=="contact"){window.location="/about/contact";return;}$("#feedback-text").focus();});$("#feedback-text").autoResize({maxHeight:200,});$("#feedback-form").unbind("submit");$("#feedback-form").submit(function(e){e.preventDefault();$("#feedback-form input, #feedback-form textarea").attr("disabled","disabled");feedbackType=$("#topic-selector li.selected a").data("type");feedbackContent=$("#feedback-text").val();$.post("/ajax/feedback",{"form_key":Connect.csrf_token_value,"type":feedbackType,"content":feedbackContent,"data":{"os":BrowserDetect.OS,"browser":BrowserDetect.browser,"browserv":BrowserDetect.version,"lang":navigator.language,"screen":screen.width+"x"+screen.height,"useragent":navigator.userAgent,},},function(){$(document).trigger("close.facebox");Connect.successMessage("Thank you! Your feedback has been sent. :)");});});};Connect.setupWelcome=function(){$(".wp-mark").unbind("click").click(function(e){e.preventDefault();thisC=$(this);$.post("/ajax/mark_welcome",{form_key:Connect.csrf_token_value,wp_type:$(this).data("wp-id"),},function(e){if(thisC.data("link")){return document.location=thisC.data("link");}Connect.hideWPPrompt();});});};Connect.hideWPPrompt=function(){$(".header-prompt").slideUp();};Connect.showTableOverlay=function(){$("div.loading-overlay").css("opacity",0.5);$("div.loading-status").show();};Connect.hideTableOverlay=function(){$("div.loading-overlay").css("opacity",1);$("div.loading-status").hide();};function validateUrl(url){if(/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(url)){return true;}else{return false;}}var Feed={};Feed.base="/";Feed.limit=0;Feed.firstID=0;Feed.lastID=0;Feed.isLoading=false;Feed.setup=function(){$("div.feed-more a").unbind("click");$("div.feed-more a").click(function(e){e.preventDefault();if($(this).attr("disabled")){return;}$(this).attr("disabled","disabled");Feed.loadMore();});};Feed.loadMore=function(callback){if(Feed.isLoading){return;}Feed.isLoading=true;$("#loading").show();$.ajax({url:Feed.base+"?after="+Feed.lastID,type:"GET",dataType:"JSON",success:function(data){if(!data.post_count||data.post_count=="false"||data.post_count<1){ev=$("div.feed-more a.btn");ev.attr("disabled","disabled");ev.text("No more to load!");return;}$("div.feed-more").before(data.feed_html);Feed.lastID=data.last_id;Connect.applyLibs();$("div.feed-more a").removeAttr("disabled");},error:function(){},complete:function(){$("#loading").hide();Feed.isLoading=false;if(callback!==null&&jQuery.isFunction(callback)){callback();}},});};Feed.curParent=0;Feed.SetupDiscussion=function(parent){Feed.curParent=parent;$("div.container a.comment-link").click(function(e){e.preventDefault();htmlForm=$("form.feed-post-reply");postID=$(this).data("post-id");if(Feed.curParent==postID){$("div#feed-listing-footer").after(htmlForm);}else{$("div#feed-reply-contain-"+postID).append(htmlForm);}$("form.feed-post-reply textarea").focus();$("form.feed-post-reply input#reply-to").val(postID);});$("div.container a.like-link").click(function(e){e.preventDefault();});$("form.feed-post-reply textarea").focus(function(){$(this).parents("form").addClass("focused");});$("#discussion-title").sticky();};Feed.SetupTagsInput=function(){$("#tags-input").tagsInput({defaultText:"",width:"auto",height:"75px",autocomplete_url:"/tag/autocomplete",autocomplete:{delay:100,autoFill:false,selectFirst:true,width:"325px"}});};Feed.autoCompleteTags=function(){$("#tags-input").autocomplete("/tag/autocomplete",{delay:5,cacheLength:500,});};Feed.setupTrackedTags=function(){$("div.tracked-tags li.tag .close").unbind("click");$("div.tracked-tags li.tag .close").click(function(e){parentLI=$(this).parents("li.tag");tagDel=parentLI.data("tag");$.post("/tag/remove-tracked",{form_key:Connect.csrf_token_value,tag:tagDel,},function(d){Connect.successMessage("You are no longer tracking "+tagDel+".");parentLI.remove();});});$("div.tracked-tags a.add-tag").unbind("click");$("div.tracked-tags a.add-tag").click(function(e){e.preventDefault();formLI=$("div.tracked-tags li.add-tag");if(formLI.is(":visible")){formLI.hide();}else{formLI.show();$("#tags-input").focus();}});};Feed.SetupMessageUsername=function(){$("#user-input").autocomplete("/users/autocomplete",{delay:5,cacheLength:500,});};Feed.setupDeleteLink=function(){$(".delete-link").unbind("click");$(".delete-link").click(function(e){e.preventDefault();if(!$(this).data("post-id")){return;}});};Connect.isDoingLike=false;Connect.LikeButtons=function(){$("a.like-link").unbind("click");$("a.like-link").click(function(e){e.preventDefault();if(Connect.user_id<1){return;}objType=$(this).data("obj-type");objID=$(this).data("obj-id");thisC=$(this);if(Connect.isDoingLike){return;}else{Connect.isDoingLike=true;}$("#loading").show();$.ajax({url:"/ajax/generic_like/",type:"POST",dataType:"JSON",data:{form_key:Connect.csrf_token_value,"object_type":objType,"object_id":objID,},success:function(data){if(data.count==1){tc="1 User Liked This &mdash;";}else{tc=data.count+" Users Liked This &mdash;";}te=(data.like)?"Unlike":"Like";thisC.data("original-title",te);thisC.text(te);if(data.like){thisC.data("does-like","true");}else{thisC.data("does-like","false");}$("#count-text-"+objType+"-"+objID).html(tc);},error:function(){Connect.ajaxError();},complete:function(){$("#loading").hide();Connect.isDoingLike=false;},});});$("span.like-count-listing").unbind("click");$("span.like-count-listing").click(function(e){objType=$(this).data("obj-type");objID=$(this).data("obj-id");thisC=$(this);url="/ajax/list_liked/"+objType+"/"+objID;$.facebox({ajax:url});});};var Ntfy={};Ntfy.pollUrl="/ajax/ntfy_check";Ntfy.numUnread=0;Ntfy.isWorking=Ntfy.didFirst=false;Ntfy.open=Ntfy.isOpening=false;Ntfy.subscribe=function(){$("#ntfy-click-item").unbind("click");$("#ntfy-click-item").click(function(e){e.preventDefault();if(Ntfy.isOpening){return;}Ntfy.isOpening=true;if($("#ntfy-flyout").is(":visible")){$("#ntfy-flyout").slideUp("fast");}else{$("#ntfy-flyout").slideDown("fast");}$(this).toggleClass("on-hover");thisClone=$(this);if(Ntfy.open){Ntfy.open=Ntfy.isOpening=false;Ntfy.hideTutorial();return;}Ntfy.open=true;$.getJSON(Ntfy.pollUrl,function(d){$("#ntfy-first-poll-holder").remove();$("div#ntfy-item-holder").html(d.html);if(d.show_tut){Ntfy.setupTutorial();Ntfy.showTutorial();}$.post("/ajax/mark_all_read",{form_key:Connect.csrf_token_value});Ntfy.setUnread(0);});Ntfy.isOpening=false;});};Ntfy.setUnread=function(n){if(n>0){$("#ntfy-unread-count").addClass("has-unread").text(n);}else{$("#ntfy-unread-count").removeClass("has-unread").text(n);}};Ntfy.setupTutorial=function(Obj){innerFly=$("#ntfy-flyout div.inner-flyout");innerFly.popover({"title":"What are these?","placement":"right","content":"These are <strong>notifications</strong>. They will alert you when you have new messages, replies, etc.",});};Ntfy.hideTutorial=function(){$("#ntfy-flyout div.inner-flyout").popover("hide");};Ntfy.showTutorial=function(){$("#ntfy-flyout div.inner-flyout").popover("show");};(function($){$.facebox=function(data,klass){$.facebox.loading();if(data.ajax){fillFaceboxFromAjax(data.ajax,klass);}else{if(data.image){fillFaceboxFromImage(data.image,klass);}else{if(data.div){fillFaceboxFromHref(data.div,klass);}else{if($.isFunction(data)){data.call($);}else{$.facebox.reveal(data,klass);}}}}};$.extend($.facebox,{settings:{opacity:0.2,overlay:true,loadingImage:"/assets/images/facebox/loading.gif",closeImage:"/assets/images/facebox/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="close"></a>       </div>     </div>'},loading:function(){init();if($("#facebox .loading").length==1){return true;}showOverlay();$("#facebox .content").empty().append('<div class="loading"><img src="'+$.facebox.settings.loadingImage+'"/></div>');$("#facebox").show().css({top:getPageScroll()[1]+(getPageHeight()/10),left:$(window).width()/2-($("#facebox .popup").outerWidth()/2)});$(document).bind("keydown.facebox",function(e){if(e.keyCode==27){$.facebox.close();}return true;});$(document).trigger("loading.facebox");},reveal:function(data,klass){$(document).trigger("beforeReveal.facebox");if(klass){$("#facebox .content").addClass(klass);}$("#facebox .content").empty().append(data);$("#facebox .popup").children().fadeIn("normal");$("#facebox").css("left",$(window).width()/2-($("#facebox .popup").outerWidth()/2));$(document).trigger("reveal.facebox").trigger("afterReveal.facebox");},close:function(){$(document).trigger("close.facebox");return false;}});$.fn.facebox=function(settings){if($(this).length==0){return;}init(settings);function clickHandler(){$.facebox.loading(true);var klass=this.rel.match(/facebox\[?\.(\w+)\]?/);if(klass){klass=klass[1];}fillFaceboxFromHref(this.href,klass);return false;}return this.bind("click.facebox",clickHandler);};function init(settings){if($.facebox.settings.inited){return true;}else{$.facebox.settings.inited=true;}$(document).trigger("init.facebox");makeCompatible();var imageTypes=$.facebox.settings.imageTypes.join("|");$.facebox.settings.imageTypesRegexp=new RegExp("\\.("+imageTypes+")(\\?.*)?$","i");if(settings){$.extend($.facebox.settings,settings);}$("body").append($.facebox.settings.faceboxHtml);var preload=[new Image(),new Image()];preload[0].src=$.facebox.settings.closeImage;preload[1].src=$.facebox.settings.loadingImage;$("#facebox").find(".b:first, .bl").each(function(){preload.push(new Image());preload.slice(-1).src=$(this).css("background-image").replace(/url\((.+)\)/,"$1");});$("#facebox .close").click($.facebox.close).append('<img src="'+$.facebox.settings.closeImage+'" class="close_image" title="close">');}function getPageScroll(){var xScroll,yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;xScroll=self.pageXOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;xScroll=document.documentElement.scrollLeft;}else{if(document.body){yScroll=document.body.scrollTop;xScroll=document.body.scrollLeft;}}}return new Array(xScroll,yScroll);}function getPageHeight(){var windowHeight;if(self.innerHeight){windowHeight=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){windowHeight=document.documentElement.clientHeight;}else{if(document.body){windowHeight=document.body.clientHeight;}}}return windowHeight;}function makeCompatible(){var $s=$.facebox.settings;$s.loadingImage=$s.loading_image||$s.loadingImage;$s.closeImage=$s.close_image||$s.closeImage;$s.imageTypes=$s.image_types||$s.imageTypes;$s.faceboxHtml=$s.facebox_html||$s.faceboxHtml;}function fillFaceboxFromHref(href,klass){if(href.match(/#/)){var url=window.location.href.split("#")[0];var target=href.replace(url,"");if(target=="#"){return;}$.facebox.reveal($(target).html(),klass);}else{if(href.match($.facebox.settings.imageTypesRegexp)){fillFaceboxFromImage(href,klass);}else{fillFaceboxFromAjax(href,klass);}}}function fillFaceboxFromImage(href,klass){var image=new Image();image.onload=function(){$.facebox.reveal('<div class="image"><img src="'+image.src+'" /></div>',klass);};image.src=href;}function fillFaceboxFromAjax(href,klass){$.get(href,function(data){$.facebox.reveal(data,klass);});}function skipOverlay(){return $.facebox.settings.overlay==false||$.facebox.settings.opacity===null;}function showOverlay(){if(skipOverlay()){return;}if($("#facebox_overlay").length==0){$("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');}$("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",$.facebox.settings.opacity).click(function(){$(document).trigger("close.facebox");}).fadeIn(200);return false;}function hideOverlay(){if(skipOverlay()){return;}$("#facebox_overlay").fadeOut(200,function(){$("#facebox_overlay").removeClass("facebox_overlayBG");$("#facebox_overlay").addClass("facebox_hide");$("#facebox_overlay").remove();});return false;}$(document).bind("close.facebox",function(){$(document).unbind("keydown.facebox");$("#facebox").fadeOut(function(){$("#facebox .content").removeClass().addClass("content");$("#facebox .loading").remove();$(document).trigger("afterClose.facebox");});hideOverlay();});})(jQuery);(function(d){function i(){var b=d("script:first"),a=b.css("color"),c=false;if(/^rgba/.test(a)){c=true;}else{try{c=a!=b.css("color","rgba(0, 0, 0, 0.5)").css("color");b.css("color",a);}catch(e){}}return c;}function g(b,a,c){var e="rgb"+(d.support.rgba?"a":"")+"("+parseInt(b[0]+c*(a[0]-b[0]),10)+","+parseInt(b[1]+c*(a[1]-b[1]),10)+","+parseInt(b[2]+c*(a[2]-b[2]),10);if(d.support.rgba){e+=","+(b&&a?parseFloat(b[3]+c*(a[3]-b[3])):1);}e+=")";return e;}function f(b){var a,c;if(a=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(b)){c=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1];}else{if(a=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(b)){c=[parseInt(a[1],16)*17,parseInt(a[2],16)*17,parseInt(a[3],16)*17,1];}else{if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)){c=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),1];}else{if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(b)){c=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4])];}}}}return c;}d.extend(true,d,{support:{rgba:i()}});var h=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];d.each(h,function(b,a){d.fx.step[a]=function(c){if(!c.init){c.a=f(d(c.elem).css(a));c.end=f(c.end);c.init=true;}c.elem.style[a]=g(c.a,c.end,c.pos);};});d.fx.step.borderColor=function(b){if(!b.init){b.end=f(b.end);}var a=h.slice(2,6);d.each(a,function(c,e){b.init||(b[e]={a:f(d(b.elem).css(e))});b.elem.style[e]=g(b[e].a,b.end,b.pos);});b.init=true;};})(jQuery);(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){hasFocus=1;lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}if(typeof fn=="function"){fn(result);}else{$input.trigger("result",result&&[result.data,result.value]);}}$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data" in arguments[1]){cache.populate();}}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected){return false;}var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){var seperator=options.multipleSeparator.length;var cursorAt=$(input).selection().start;var wordAt,progress=0;$.each(words,function(i,word){progress+=word.length;if(cursorAt<=progress){wordAt=i;return false;}progress+=seperator;});words[wordAt]=v;v=words.join(options.multipleSeparator);}v+=options.multipleSeparator;}$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue){return;}previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase){currentValue=currentValue.toLowerCase();}request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}}function trimWords(value){if(!value){return[""];}if(!options.multiple){return[$.trim(value)];}return $.map(value.split(options.multipleSeparator),function(word){return $.trim(value).length?$.trim(word):null;});}function lastWord(value){if(!options.multiple){return value;}var words=trimWords(value);if(words.length==1){return words[0];}var cursorAt=$(input).selection().start;if(cursorAt==value.length){words=trimWords(value);}else{words=trimWords(value.replace(value.substring(cursorAt),""));}return words[words.length-1];}function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$(input).selection(previousValue.length,previousValue.length+sValue.length);}}function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);}function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}else{$input.val("");$input.trigger("result",null);}}});}}function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}}function request(term,success,failure){if(!options.matchCase){term=term.toLowerCase();}var data=cache.load(term);if(data&&data.length){success(term,data);}else{if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}}}function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}return parsed;}function stopLoading(){$input.removeClass(options.loadingClass);}};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase){s=s.toLowerCase();}var i=s.indexOf(sub);if(options.matchContains=="word"){i=s.toLowerCase().search("\\b"+sub.toLowerCase());}if(i==-1){return false;}return i==0||options.matchContains;}function add(q,value){if(length>options.cacheLength){flush();}if(!data[q]){length++;}data[q]=value;}function populate(){if(!options.data){return false;}var stMatchSets={},nullData=0;if(!options.url){options.cacheLength=1;}stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false){continue;}var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar]){stMatchSets[firstChar]=[];}var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}}$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}setTimeout(populate,25);function flush(){data={};length=0;}return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length){return null;}if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}return csub;}else{if(data[q]){return data[q];}else{if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}}}return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit){return;}element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=="LI"){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0){element.css("width",options.width);}needsInit=false;}function target(event){var element=event.target;while(element&&element.tagName!="LI"){element=element.parentNode;}if(!element){return[];}return element;}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else{if(offset<list.scrollTop()){list.scrollTop(offset);}}}}function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else{if(active>=listItems.size()){active=0;}}}function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i]){continue;}var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false){continue;}var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}if($.fn.bgiframe){list.bgiframe();}}return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:"auto"});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css("height",scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.fn.selection=function(start,end){if(start!==undefined){return this.each(function(){if(this.createTextRange){var selRange=this.createTextRange();if(end===undefined||start==end){selRange.move("character",start);selRange.select();}else{selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}}else{if(this.setSelectionRange){this.setSelectionRange(start,end);}else{if(this.selectionStart){this.selectionStart=start;this.selectionEnd=end;}}}});}var field=this[0];if(field.createTextRange){var range=document.selection.createRange(),orig=field.value,teststring="<->",textLength=range.text.length;range.text=teststring;var caretAt=field.value.indexOf(teststring);field.value=orig;this.selection(caretAt,caretAt+textLength);return{start:caretAt,end:caretAt+textLength};}else{if(field.selectionStart!==undefined){return{start:field.selectionStart,end:field.selectionEnd};}}};})(jQuery);(function($){var delimiter=new Array();var tags_callbacks=new Array();$.fn.addTag=function(value,options){var options=jQuery.extend({focus:false,callback:true},options);this.each(function(){id=$(this).attr("id");var tagslist=$(this).val().split(delimiter[id]);if(tagslist[0]==""){tagslist=new Array();}nvalue=jQuery.trim(value);value=value.replace("/&/g","&amp;").replace("/</g","&lt;").replace("/>/g","&gt;");if(options.unique){skipTag=$(tagslist).tagExist(value);}else{skipTag=false;}if(value!=""&&skipTag!=true){$("<span>").addClass("tag").append($("<span>").text(value).append("&nbsp;&nbsp;"),$("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return $("#"+id).removeTag(escape(value));})).insertBefore("#"+id+"_addTag");tagslist.push(nvalue);$("#"+id+"_tag").val("");if(options.focus){$("#"+id+"_tag").focus();}else{$("#"+id+"_tag").blur();}if(options.callback&&tags_callbacks[id]&&tags_callbacks[id]["onAddTag"]){var f=tags_callbacks[id]["onAddTag"];f(value);}if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var i=tagslist.length;var f=tags_callbacks[id]["onChange"];f($(this),tagslist[i]);}}$.fn.tagsInput.updateTagsField(this,tagslist);});return false;};$.fn.removeTag=function(value){value=unescape(value);this.each(function(){id=$(this).attr("id");var old=$(this).val().split(delimiter[id]);$("#"+id+"_tagsinput .tag").remove();str="";for(i=0;i<old.length;i++){if(old[i]!=value){str=str+delimiter[id]+old[i];}}$.fn.tagsInput.importTags(this,str);if(tags_callbacks[id]&&tags_callbacks[id]["onRemoveTag"]){var f=tags_callbacks[id]["onRemoveTag"];f(value);}});return false;};$.fn.tagExist=function(val){if(jQuery.inArray(val,$(this))==-1){return false;}else{return true;}};$.fn.importTags=function(str){$("#"+id+"_tagsinput .tag").remove();$.fn.tagsInput.importTags(this,str);};$.fn.tagsInput=function(options){var settings=jQuery.extend({interactive:true,defaultText:"add a tag",minChars:0,width:"300px",height:"100px","hide":true,"delimiter":",",autocomplete:{selectFirst:false},"unique":true,removeWithBackspace:true},options);this.each(function(){if(settings.hide){$(this).hide();}id=$(this).attr("id");data=jQuery.extend({pid:id,real_input:"#"+id,holder:"#"+id+"_tagsinput",input_wrapper:"#"+id+"_addTag",fake_input:"#"+id+"_tag"},settings);delimiter[id]=data.delimiter;if(settings.onAddTag||settings.onRemoveTag||settings.onChange){tags_callbacks[id]=new Array();tags_callbacks[id]["onAddTag"]=settings.onAddTag;tags_callbacks[id]["onRemoveTag"]=settings.onRemoveTag;tags_callbacks[id]["onChange"]=settings.onChange;}var markup='<div id="'+id+'_tagsinput" class="tagsinput"><div id="'+id+'_addTag">';if(settings.interactive){markup=markup+'<input id="'+id+'_tag" value="" data-default="'+settings.defaultText+'" />';}markup=markup+'</div><div class="tags_clear"></div></div>';$(markup).insertAfter(this);$(data.holder).css("width",settings.width);$(data.holder).css("height",settings.height);if($(data.real_input).val()!=""){$.fn.tagsInput.importTags($(data.real_input),$(data.real_input).val());}if(settings.interactive){$(data.fake_input).val($(data.fake_input).attr("data-default"));$(data.fake_input).css("color","#666666");$(data.holder).bind("click",data,function(event){$(event.data.fake_input).focus();});$(data.fake_input).bind("focus",data,function(event){if($(event.data.fake_input).val()==$(event.data.fake_input).attr("data-default")){$(event.data.fake_input).val("");}$(event.data.fake_input).css("color","#000000");});if(settings.autocomplete_url!=undefined){$(data.fake_input).autocomplete(settings.autocomplete_url,settings.autocomplete).bind("result",data,function(event,data,formatted){if(data){$(event.data.real_input).addTag(formatted,{focus:true,unique:(settings.unique)});}});$(data.fake_input).bind("blur",data,function(event){if($(".ac_results").is(":visible")){return false;}if($(event.data.fake_input).val()!=$(event.data.fake_input).attr("data-default")){if((event.data.minChars<=$(event.data.fake_input).val().length)&&(!event.data.maxChars||(event.data.maxChars>=$(event.data.fake_input).val().length))){$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:false,unique:(settings.unique)});}}$(event.data.fake_input).val($(event.data.fake_input).attr("data-default"));$(event.data.fake_input).css("color","#666666");return false;});}else{$(data.fake_input).bind("blur",data,function(event){var d=$(this).attr("data-default");if($(event.data.fake_input).val()!=""&&$(event.data.fake_input).val()!=d){if((event.data.minChars<=$(event.data.fake_input).val().length)&&(!event.data.maxChars||(event.data.maxChars>=$(event.data.fake_input).val().length))){$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});}}else{$(event.data.fake_input).val($(event.data.fake_input).attr("data-default"));$(event.data.fake_input).css("color","#666666");}return false;});}$(data.fake_input).bind("keypress",data,function(event){if(event.which==event.data.delimiter.charCodeAt(0)||event.which==13){if((event.data.minChars<=$(event.data.fake_input).val().length)&&(!event.data.maxChars||(event.data.maxChars>=$(event.data.fake_input).val().length))){$(event.data.real_input).addTag($(event.data.fake_input).val(),{focus:true,unique:(settings.unique)});}return false;}});data.removeWithBackspace&&$(data.fake_input).bind("keyup",function(event){if(event.keyCode==8&&$(this).val()==""){var last_tag=$(this).closest(".tagsinput").find(".tag:last").text();var id=$(this).attr("id").replace(/_tag$/,"");last_tag=last_tag.replace(/[\s]+x$/,"");$("#"+id).removeTag(escape(last_tag));$(this).trigger("focus");}});$(data.fake_input).blur();}return false;});return this;};$.fn.tagsInput.updateTagsField=function(obj,tagslist){id=$(obj).attr("id");$(obj).val(tagslist.join(delimiter[id]));};$.fn.tagsInput.importTags=function(obj,val){$(obj).val("");id=$(obj).attr("id");var tags=val.split(delimiter[id]);for(i=0;i<tags.length;i++){$(obj).addTag(tags[i],{focus:false,callback:false});}if(tags_callbacks[id]&&tags_callbacks[id]["onChange"]){var f=tags_callbacks[id]["onChange"];f(obj,tags[i]);}};})(jQuery);(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else{if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else{if(typeof timestamp==="number"){return inWords(new Date(timestamp));}else{return inWords($.timeago.datetime(timestamp));}}}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow;}}var seconds=Math.abs(distanceMillis)/1000;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value);}var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator===undefined?" ":$l.wordSeparator;return $.trim([prefix,words,suffix].join(separator));},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d\d\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(s);},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601);},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time";}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh);},$s.refreshMillis);}return self;};function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime));}return this;}function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text);}}return element.data("timeago");}function inWords(date){return $t.inWords(distance(date));}function distance(date){return(new Date().getTime()-date.getTime());}document.createElement("abbr");document.createElement("time");}(jQuery));(function($){var defaults={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper"},$window=$(window),$document=$(document),sticked=[],windowHeight=$window.height(),scroller=function(){var scrollTop=$window.scrollTop(),documentHeight=$document.height(),dwh=documentHeight-windowHeight,extra=(scrollTop>dwh)?dwh-scrollTop:0;for(var i=0;i<sticked.length;i++){var s=sticked[i],elementTop=s.stickyWrapper.offset().top,etse=elementTop-s.topSpacing-extra;if(scrollTop<=etse){if(s.currentTop!==null){s.stickyElement.css("position","").css("top","").removeClass(s.className);s.stickyElement.parent().removeClass(s.className);s.currentTop=null;}}else{var newTop=documentHeight-s.stickyElement.outerHeight()-s.topSpacing-s.bottomSpacing-scrollTop-extra;if(newTop<0){newTop=newTop+s.topSpacing;}else{newTop=s.topSpacing;}if(s.currentTop!=newTop){s.stickyElement.css("position","fixed").css("top",newTop).addClass(s.className);s.stickyElement.parent().addClass(s.className);s.currentTop=newTop;}}}},resizer=function(){windowHeight=$window.height();},methods={init:function(options){var o=$.extend(defaults,options);return this.each(function(){var stickyElement=$(this);stickyId=stickyElement.attr("id");wrapper=$("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(o.wrapperClassName);stickyElement.wrapAll(wrapper);var stickyWrapper=stickyElement.parent();stickyWrapper.css("height",stickyElement.outerHeight());sticked.push({topSpacing:o.topSpacing,bottomSpacing:o.bottomSpacing,stickyElement:stickyElement,currentTop:null,stickyWrapper:stickyWrapper,className:o.className});});},update:scroller};if(window.addEventListener){window.addEventListener("scroll",scroller,false);window.addEventListener("resize",resizer,false);}else{if(window.attachEvent){window.attachEvent("onscroll",scroller);window.attachEvent("onresize",resizer);}}$.fn.sticky=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.sticky");}}};$(function(){setTimeout(scroller,0);});})(jQuery);